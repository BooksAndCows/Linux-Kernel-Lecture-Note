# 3강\(By wisecow\)

---

2강에서 설명을 시작했던 fork\( \)의 작동 원리에 대해서 계속 진행한다.

![](/assets/Chapter 3_0.PNG)

그림에서 수정된 사안이 하나 있는데, printf\("I am parent!\n"\) 부분이 else 구문에 속하는 그림이 맞다. 

위의 코드를 바탕으로 돌아가고 있는 프로그램이 쉘\(Shell\) 프로그램이라고 가정해보자. 쉘 프로그램으로 인해 명령어를 입력할 수 있는 터미널 혹은 프롬프트 창이 떴고 사용자로부터 명령이 오기만을 기다리고 있다.

우리가 쉘에 한글 프로그램을 실행시키는 명령어 'hwp'라는 명령을 입력했다고 해보자. 그럼 쉘이 가장먼저 하는 작업은 fork\( \)이고, fork\( \)를 하게 되면 자식 프로세스가 생성되면서 위 그림에 있는 코드를 그대로 복사해간다. 아직은 부모 프로세스가 CPU를 점유하고 있기에 fork\( \)로부터 리턴된 pid값을 가지고 프로그램을 마저 진행한다.

앞서 2강에서 fork\( \)는 두 번 리턴된다고 설명한 바 있다. 첫 번째 리턴에서는 부모의 pid\(Process Id\)를 리턴하므로 if 조건문을 건너 띄고 else 구문으로 넘어간다. else구문으로 넘어가면 printf\("I am parent!\n"\); 가 실행되고 모니터 화면에는 I am parent 가 나타나게 될 것이다.



