# 7강\(by wiseCow\)

---

인터럽트 처리\(Interrupt Handling\)에 대한 내용을 다룰 것이다. 소프트웨어로서의 인터럽트를 설명하기 위해 자료 구조\(Data Structure\)와 함수\(Function\) 이 두가지로 설명으로 구성했다.



## 7.1 Data Structure for Interrupt Handling

---

6강에서 사용했던 용어들이 이번 7강에서도 그대로 사용된다. CPU에 인터럽트를 거는 것을 Interrupt ReQuest라고 다뤘다. 또한 컴퓨터에 여러 I/O Device가 있을 경우 각각을 IRQ line을 통해 관리한다고 했다. 아래 템플릿의 우측 네모박스를 살펴보면, 여러 Device들이 IRQ line에 달려 있다. 매 라인마다 디바이스들을 매단 형태로 되어 있다. 또한 각 디바이스들이 동시에 인터럽트를 요청하는 상황이 발생할 수 있기 때문에, 각 작업들의 교통 정리를 담당하는 PIC\(Programmable Interrupt Controller\)를 따로 두었다. Programmable 이란 표현이 쓰인 것은, 각각의 디바이스들이 file 형태로 시스템 내에 존재하고 각 디바이스를 0과 1의 형태로 제어할 수 있기 때문이다. PIC가 존재함으로써 아무리 많은 인터럽트가 들어와도 한 번에 하나씩 CPU에 전달될 수 있다.

![](/assets/Chapter 7_0.PNG)

지금부터는 위 템플릿과 함께 각 IRQ line을 자세히 살펴보도록 한다. 위 템플릿의 우측상단 박스에는 각 IRQ line이 가질 수 있는 상태\(Status\)에 대해 서술이 되어 있다.

* IRQ\_DISABLED - 인터럽트 자체가 허용이 안된다. \(마스킹이 되있거나 그렇지 않거나.\) 라인 자체를 mask out 시켜놨다.
* IRQ\_WAITING - 인터럽트 자체는 허용이 되었지만, 아직 발생하지 않았다.
* IRQ\_PENDING - 인터럽트가 발생했데, 커널이 아직도 이 인터럽트를 서비스하지 못하고 있다.
* IRQ\_INPROGRESS - 커널이 해당 ISR\(Interrupt Service Routine\)를 실행하고 있다.





